/*!
   angular-project-template v0.0.1
   (c) 2014 (null) McNull https://github.com/McNull/angular-project-template
   License: MIT
*/
!function(t){t.module("blockUI",[]),t.module("blockUI").config(["$provide","$httpProvider",function(t,e){t.decorator("$exceptionHandler",["$delegate","$injector",function(t,e){var n,o;return function(r,c){o=o||e.get("blockUIConfig"),o.resetOnException&&(n=n||e.get("blockUI"),n.instances.reset()),t(r,c)}}]),e.interceptors.push("blockUIHttpInterceptor")}]),t.module("blockUI").run(["$document",function(t){t.find("body").append('<div block-ui="main"></div>')}]),t.module("blockUI").provider("blockUIConfig",function(){var e={templateUrl:"angular-block-ui/angular-block-ui.ng.html",delay:250,message:"Loading ...",autoBlock:!0,resetOnException:!0,requestFilter:t.noop};this.templateUrl=function(t){e.templateUrl=t},this.template=function(t){e.template=t},this.delay=function(t){e.delay=t},this.message=function(t){e.message=t},this.autoBlock=function(t){e.autoBlock=t},this.resetOnException=function(t){e.resetOnException=t},this.requestFilter=function(t){e.requestFilter=t},this.$get=function(){return e}}),t.module("blockUI").directive("blockUi",["blockUI","blockUIConfig","blockUiLinkFn",function(t,e,n){return{scope:!0,restrict:"A",templateUrl:e.template?void 0:e.templateUrl,template:e.template,link:n}}]).factory("blockUiLinkFn",["blockUI","blockUIUtils",function(t,e){return function(n,o,r){var c=o.parent();if(c.length){var i=t;if("BODY"===c[0].tagName)var l=n.$on("$viewContentLoaded",function(){l(),n.$on("$locationChangeStart",function(t){n.state.blockCount>0&&t.preventDefault()})});else{c.css("position","relative");var a=r.blockUi?r.blockUi:"_"+n.$id;i=t.instances.get(a);var s=o.inheritedData("block-ui");s&&(i._parent=s);var u=r.blockUiPattern;if(u){var f=e.buildRegExp(u);i.pattern(f)}n.$on("$destroy",function(){i.release()}),i.addRef()}o.addClass("block-ui"),c.data("block-ui",i),n.state=i.state()}}}]),t.module("blockUI").factory("blockUIHttpInterceptor",["$q","$injector","blockUIConfig",function(t,e,n){function o(){i=i||e.get("blockUI")}function r(t){n.autoBlock&&!t.$_noBlock&&t.$_blocks&&(o(),t.$_blocks.stop())}function c(e){return r(e.config),t.reject(e)}var i;return{request:function(t){return n.autoBlock&&(n.requestFilter(t)===!1?t.$_noBlock=!0:(o(),t.$_blocks=i.instances.locate(t),t.$_blocks.start())),t},requestError:c,response:function(t){return r(t.config),t},responseError:c}}]),t.module("blockUI").factory("blockUI",["blockUIConfig","$timeout","blockUIUtils","$document",function(e,n,o,r){function c(c){var l,s=this,u={id:c,blockCount:0,message:e.message,blocking:!1},f=[];this._refs=0,this.start=function(c){u.message=c||e.message,u.blockCount++;var i=t.element(r[0].activeElement);i.length&&o.isElementInBlockScope(i,s)&&(s._restoreFocus=i[0],s._restoreFocus.blur()),l||(l=n(function(){l=null,u.blocking=!0},e.delay))},this._cancelStartTimeout=function(){l&&(n.cancel(l),l=null)},this.stop=function(){u.blockCount=Math.max(0,--u.blockCount),0===u.blockCount&&s.reset(!0)},this.message=function(t){u.message=t},this.pattern=function(t){return void 0!==t&&(s._pattern=t),s._pattern},this.reset=function(e){s._cancelStartTimeout(),u.blockCount=0,u.blocking=!1,!s._restoreFocus||r[0].activeElement&&r[0].activeElement!==i[0]||(s._restoreFocus.focus(),s._restoreFocus=null);try{e&&t.forEach(f,function(t){t()})}finally{f.length=0}},this.done=function(t){f.push(t)},this.state=function(){return u},this.addRef=function(){s._refs+=1},this.release=function(){--s._refs<=0&&a.instances._destroy(s)}}var i=r.find("body"),l=[];l.get=function(t){var e=l[t];return e||(e=l[t]=new c(t),l.push(e)),e},l._destroy=function(e){if(t.isString(e)&&(e=l[e]),e){e.reset(),delete l[e.state().id];for(var n=l.length;--n;)if(l[n]===e){l.splice(n,1);break}}},l.locate=function(t){var e=[];o.forEachFnHook(e,"start"),o.forEachFnHook(e,"stop");for(var n=l.length;n--;){var r=l[n],c=r._pattern;c&&c.test(t.url)&&e.push(r)}return 0===e.length&&e.push(a),e},o.forEachFnHook(l,"reset");var a=l.get("main");return a.addRef(),a.instances=l,a}]),t.module("blockUI").factory("blockUIUtils",function(){var t={buildRegExp:function(t){var e,n=t.match(/^\/(.*)\/([gim]*)$/);if(!n)throw Error("Incorrect regular expression format: "+t);return e=new RegExp(n[1],n[2])},forEachFn:function(t,e,n){for(var o=t.length;o--;){var r=t[o];r[e].apply(r,n)}},forEachFnHook:function(e,n){e[n]=function(){t.forEachFn(this,n,arguments)}},isElementInBlockScope:function(t,e){for(var n=t.inheritedData("block-ui");n;){if(n===e)return!0;n=n._parent}return!1}};return t}),t.module("blockUI").run(["$templateCache",function(t){t.put("angular-block-ui/angular-block-ui.ng.html",'<div ng-show="state.blockCount > 0" class="block-ui-overlay" ng-class="{ \'block-ui-visible\': state.blocking }"></div><div ng-show="state.blocking" class="block-ui-message-container"><div class="block-ui-message">{{ state.message }}</div></div>')}])}(angular);
//# sourceMappingURL=angular-block-ui.min.js.map